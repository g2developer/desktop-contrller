<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>데스크탑 컨트롤러</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div class="app-container">
    <!-- 사이드바 -->
    <aside class="sidebar">
      <div class="app-logo">
        <span class="icon" style="font-size: 24px;">🖥️</span>
        <h1>데스크탑 컨트롤러</h1>
      </div>
      
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="#" class="nav-link active" data-tab="dashboard">
            <span class="icon">📊</span>
            대시보드
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" data-tab="capture">
            <span class="icon">📷</span>
            화면 캡처
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" data-tab="users">
            <span class="icon">👥</span>
            사용자 관리
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" data-tab="commands">
            <span class="icon">🔍</span>
            명령 이력
          </a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" data-tab="settings">
            <span class="icon">⚙️</span>
            설정
          </a>
        </li>
      </ul>
      
      <div class="server-status">
        <div class="status-title">서버 상태</div>
        <div class="status-info">
          <span class="status-badge online"></span>
          <span class="status-text">실행 중</span>
        </div>
        <div class="status-info">
          <span class="status-text">포트: <span id="server-port">3000</span></span>
        </div>
        <div class="status-info">
          <span class="status-text">IP: <span id="server-ip">192.168.0.10</span></span>
        </div>
      </div>
    </aside>
    
    <!-- 헤더 -->
    <header class="header">
      <h2 class="page-title">대시보드</h2>
      <div class="header-actions">
        <button class="btn btn-outline" id="refresh-btn">
          <span class="icon">🔄</span> 새로고침
        </button>
        <button class="btn btn-primary" id="start-server-btn" style="margin-left: 8px;">
          <span class="icon">▶️</span> <span id="server-action-text">서버 시작</span>
        </button>
      </div>
    </header>
    
    <!-- 메인 콘텐츠 영역 -->
    <main class="main">
      <!-- 대시보드 탭 -->
      <section id="dashboard" class="tab-content active">
        <div class="dashboard-stats">
          <div class="stat-card">
            <div class="stat-title">연결된 클라이언트</div>
            <div class="stat-value"><span id="client-count">0</span></div>
          </div>
          <div class="stat-card">
            <div class="stat-title">오늘 총 명령 수</div>
            <div class="stat-value"><span id="command-count">0</span></div>
          </div>
          <div class="stat-card">
            <div class="stat-title">활성 사용자</div>
            <div class="stat-value"><span id="active-users">0</span></div>
          </div>
          <div class="stat-card">
            <div class="stat-title">서버 가동 시간</div>
            <div class="stat-value"><span id="uptime">00:00:00</span></div>
          </div>
        </div>
        
        <div class="grid-2">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">연결된 디바이스</h3>
              <button class="btn btn-outline btn-sm" id="refresh-clients-btn">새로고침</button>
            </div>
            <div class="card-body">
              <div class="table-container">
                <table>
                  <thead>
                    <tr>
                      <th>사용자</th>
                      <th>디바이스</th>
                      <th>IP 주소</th>
                      <th>상태</th>
                      <th>연결 시간</th>
                      <th>액션</th>
                    </tr>
                  </thead>
                  <tbody id="clients-list">
                    <!-- 자바스크립트로 동적 추가 -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">최근 활동</h3>
            </div>
            <div class="card-body">
              <div class="activity-log" id="activity-log">
                <!-- 자바스크립트로 동적 추가 -->
              </div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">클라이언트 연결 정보</h3>
          </div>
          <div class="card-body">
            <div class="grid-2">
              <div class="qr-code-container">
                <h4>QR 코드 연결</h4>
                <p>모바일 앱에서 QR 코드를 스캔하여 연결하세요.</p>
                <div id="qrcode" style="width: 200px; height: 200px; margin: 20px auto; background-color: #f9f9f9; display: flex; align-items: center; justify-content: center;">
                  QR 코드 영역
                </div>
              </div>
              
              <div class="manual-connection">
                <h4>수동 연결</h4>
                <p>아래 주소를 모바일 앱에 직접 입력하세요.</p>
                <div class="form-group">
                  <div class="input-with-button">
                    <input type="text" class="form-control" value="http://192.168.0.10:3000" readonly id="connection-url">
                    <button class="btn btn-outline" id="copy-url-btn">복사</button>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">연결 상태</label>
                  <div class="status-info">
                    <span class="status-badge online"></span>
                    <span class="status-text">서버 실행 중</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 화면 캡처 탭 -->
      <section id="capture" class="tab-content">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">AI 응답 화면 캡처</h3>
          </div>
          <div class="card-body">
            <div class="grid-2">
              <div>
                <div class="form-group">
                  <label class="form-label">캡처 영역 설정</label>
                  <p>클로드 앱의 AI 응답 영역을 선택하세요.</p>
                  <div class="form-group">
                    <button class="btn btn-primary" id="select-area-btn">
                      <span class="icon">📏</span> 영역 선택
                    </button>
                    <button class="btn btn-outline" id="test-capture-btn">
                      <span class="icon">📷</span> 테스트 캡처
                    </button>
                  </div>
                </div>
                
                <div class="form-group">
                  <label class="form-label">캡처 설정</label>
                  <div class="form-group">
                    <label class="form-checkbox">
                      <input type="checkbox" id="auto-capture" checked> 명령 실행 후 자동 캡처
                    </label>
                  </div>
                  <div class="form-group">
                    <label class="form-checkbox">
                      <input type="checkbox" id="auto-send" checked> 캡처 후 자동 전송
                    </label>
                  </div>
                  <div class="form-group">
                    <label class="form-label">이미지 품질</label>
                    <select class="form-control" id="image-quality">
                      <option value="high">높음 (원본)</option>
                      <option value="medium" selected>중간 (압축)</option>
                      <option value="low">낮음 (빠른 전송)</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="capture-preview">
                <img src="" alt="캡처 미리보기" class="capture-image" id="capture-preview-img" style="display: none;">
                <div class="capture-placeholder" id="capture-placeholder">
                  <span class="icon" style="font-size: 48px; margin-bottom: 16px;">📷</span>
                  <p>캡처된 화면이 여기에 표시됩니다.<br>테스트 캡처 버튼을 클릭하여 미리보기를 확인하세요.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">최근 캡처된 화면</h3>
          </div>
          <div class="card-body">
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>시간</th>
                    <th>명령어</th>
                    <th>크기</th>
                    <th>전송 상태</th>
                    <th>액션</th>
                  </tr>
                </thead>
                <tbody id="captures-list">
                  <!-- 자바스크립트로 동적 추가 -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 사용자 관리 탭 -->
      <section id="users" class="tab-content">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">사용자 목록</h3>
            <button class="btn btn-primary" id="add-user-btn">
              <span class="icon">➕</span> 사용자 추가
            </button>
          </div>
          <div class="card-body">
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>아이디</th>
                    <th>이름</th>
                    <th>마지막 접속</th>
                    <th>상태</th>
                    <th>액션</th>
                  </tr>
                </thead>
                <tbody id="users-list">
                  <!-- 자바스크립트로 동적 추가 -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 명령 이력 탭 -->
      <section id="commands" class="tab-content">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">명령 이력</h3>
            <div>
              <button class="btn btn-outline" id="stats-btn">
                <span class="icon">📊</span> 통계 보기
              </button>
              <button class="btn btn-outline" id="clear-commands-btn" style="margin-left: 8px;">
                <span class="icon">🗑️</span> 기록 삭제
              </button>
            </div>
          </div>
          <div class="card-body">
            <div class="form-group">
              <div class="input-with-button">
                <input type="text" class="form-control" placeholder="명령어 검색..." id="command-search">
                <button class="btn btn-outline" id="search-btn">검색</button>
              </div>
            </div>
            
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>시간</th>
                    <th>사용자</th>
                    <th>명령어</th>
                    <th>처리 상태</th>
                    <th>응답 시간</th>
                    <th>액션</th>
                  </tr>
                </thead>
                <tbody id="commands-list">
                  <!-- 자바스크립트로 동적 추가 -->
                </tbody>
              </table>
            </div>
          </div>
          <div class="card-footer">
            <div class="pagination">
              <button class="btn btn-outline" id="prev-page">이전</button>
              <span class="page-info">1 / 1 페이지</span>
              <button class="btn btn-outline" id="next-page">다음</button>
            </div>
          </div>
        </div>
      </section>
      
      <!-- 설정 탭 -->
      <section id="settings" class="tab-content">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">서버 설정</h3>
          </div>
          <div class="card-body">
            <form id="server-settings-form">
              <div class="form-group">
                <label class="form-label" for="server-port-input">서버 포트</label>
                <input type="number" class="form-control" id="server-port-input" value="3000" min="1024" max="65535">
                <small>1024-65535 사이의 포트 번호를 입력하세요.</small>
              </div>
              <div class="form-group">
                <label class="form-label" for="timeout">소켓 연결 시간 제한 (초)</label>
                <input type="number" class="form-control" id="timeout" value="30" min="10" max="300">
              </div>
              <div class="form-group">
                <label class="form-checkbox">
                  <input type="checkbox" id="auto-start" checked> 프로그램 시작 시 서버 자동 실행
                </label>
              </div>
            </form>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">클로드 앱 설정</h3>
          </div>
          <div class="card-body">
            <form id="claude-settings-form">
              <div class="form-group">
                <label class="form-label" for="claude-path">클로드 앱 경로</label>
                <div class="input-with-button">
                  <input type="text" class="form-control" id="claude-path" placeholder="클로드 앱 실행 파일 경로">
                  <button class="btn btn-outline" id="browse-btn">찾아보기</button>
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">실행 옵션</label>
                <label class="form-checkbox">
                  <input type="checkbox" id="auto-launch" checked> 명령 수신 시 클로드 앱 자동 실행
                </label>
                <label class="form-checkbox">
                  <input type="checkbox" id="auto-capture-after" checked> 응답 후 자동으로 화면 캡처
                </label>
              </div>
              <div class="form-group">
                <label class="form-label" for="capture-delay">화면 캡처 지연 시간 (초)</label>
                <input type="number" class="form-control" id="capture-delay" value="2" min="0" max="10">
                <small>AI 응답 완료 후 화면 캡처까지의 지연 시간</small>
              </div>
            </form>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">보안 설정</h3>
          </div>
          <div class="card-body">
            <form id="security-settings-form">
              <div class="form-group">
                <label class="form-label" for="session-timeout">로그인 시간 제한 (분)</label>
                <input type="number" class="form-control" id="session-timeout" value="30" min="5" max="120">
                <small>세션 유지 시간을 설정합니다.</small>
              </div>
              <div class="form-group">
                <label class="form-label">비밀번호 정책</label>
                <label class="form-checkbox">
                  <input type="checkbox" id="pwd-length" checked> 최소 8자 이상 필요
                </label>
                <label class="form-checkbox">
                  <input type="checkbox" id="pwd-numbers" checked> 숫자 포함 필요
                </label>
                <label class="form-checkbox">
                  <input type="checkbox" id="pwd-special"> 특수문자 포함 필요
                </label>
              </div>
              <div class="form-group">
                <label class="form-label" for="login-attempts">로그인 시도 제한</label>
                <input type="number" class="form-control" id="login-attempts" value="5" min="1" max="10">
                <small>최대 로그인 시도 횟수</small>
              </div>
            </form>
          </div>
        </div>
        
        <div class="form-group" style="margin-top: 24px; text-align: right;">
          <button class="btn btn-primary" id="save-settings">설정 저장</button>
          <button class="btn btn-outline" id="reset-settings">초기화</button>
        </div>
      </section>
    </main>
    
    <!-- 푸터 -->
    <footer class="footer">
      <p>&copy; 2024 데스크탑 컨트롤러. 모든 권리 보유.</p>
    </footer>
  </div>
  
  <!-- 사용자 추가/수정 모달 -->
  <div class="modal" id="user-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="modal-title">사용자 추가</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="user-form">
          <div class="form-group">
            <label class="form-label" for="user-id">아이디</label>
            <input type="text" class="form-control" id="user-id" placeholder="사용자 아이디" required>
          </div>
          <div class="form-group">
            <label class="form-label" for="user-name">이름</label>
            <input type="text" class="form-control" id="user-name" placeholder="사용자 이름" required>
          </div>
          <div class="form-group">
            <label class="form-label" for="user-password">비밀번호</label>
            <input type="password" class="form-control" id="user-password" placeholder="비밀번호" required>
          </div>
          <div class="form-group">
            <label class="form-label" for="user-password-confirm">비밀번호 확인</label>
            <input type="password" class="form-control" id="user-password-confirm" placeholder="비밀번호 확인" required>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="save-user">저장</button>
        <button class="btn btn-outline" id="cancel-user">취소</button>
      </div>
    </div>
  </div>
  
  <!-- 명령 결과 보기 모달 -->
  <div class="modal" id="command-result-modal">
    <div class="modal-content" style="max-width: 600px;">
      <div class="modal-header">
        <h3 class="modal-title">AI 응답 결과</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">명령어</label>
          <div class="claude-command" id="result-command"></div>
        </div>
        <div class="form-group">
          <label class="form-label">응답 결과</label>
          <div class="claude-response" id="result-response"></div>
        </div>
        <div class="claude-controls">
          <button class="btn btn-outline" id="copy-result">
            <span class="icon">📋</span> 복사
          </button>
          <button class="btn btn-outline" id="download-result">
            <span class="icon">⤵️</span> 다운로드
          </button>
          <button class="btn btn-outline" id="resend-result">
            <span class="icon">📤</span> 재전송
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <script src="./renderer.js"></script>
</body>
</html>