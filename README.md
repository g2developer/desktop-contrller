# 데스크탑 컨트롤러 앱 (서버)

이 앱은 Electron 기반의 데스크탑 애플리케이션으로, 모바일 앱에서 접속하여 원격으로 데스크탑을 제어할 수 있게 해주는 서버 역할을 합니다.

## 주요 기능

1. **원격 접속 기능**
   - 모바일 앱에서 데스크탑 앱으로 원격 접속
   - Socket.io를 통한 실시간 통신
   - 다중 접속 지원으로 여러 기기에서 동시에 제어 가능

2. **사용자 인증 시스템**
   - 사용자 정보를 JSON 파일로 관리
   - 사용자 추가/수정/삭제 기능 제공
   - 사용자별 접속 이력 및 명령 기록 유지

3. **원격 명령 실행**
   - 모바일 앱에서 전송된 명령을 클로드 데스크탑 앱에 전달
   - 자동 키보드 입력 및 엔터키 입력 기능
   - 명령어 템플릿 지원으로 자주 사용하는 명령어 저장 및 관리

4. **AI 결과 화면 공유**
   - 클로드 앱의 AI 응답 영역을 캡처하여 모바일 앱으로 전송
   - 실시간 화면 공유 기능
   - 응답 이미지 저장 및 내보내기 기능

5. **자동 버튼 클릭 기능**
   - "권한 허용"이나 "계속하기" 등의 팝업 버튼 자동 인식 및 클릭
   - 대화 흐름이 중단되지 않도록 자동 처리
   - 활성화/비활성화 옵션 제공

6. **로그 및 통계 기능**
   - 명령 실행 및 응답 이력의 상세 로깅
   - 사용 통계 대시보드로 활동 분석
   - 로그 내보내기 및 필터링 기능

7. **보안 기능**
   - 암호화된 통신으로 데이터 보호
   - 접속 IP 제한 기능으로 허용된 네트워크만 접근 가능
   - 세션 관리 및 자동 로그아웃 설정

8. **자동화 스크립트 기능**
   - 명령어 시퀀스를 저장하고 실행하는 매크로 기능
   - 시간 기반 자동 명령 실행 스케줄링
   - 조건부 명령 실행 지원

## 프로젝트 구조

```
desktop-contrller/
├── main.js               # 메인 프로세스 (Electron 진입점)
├── preload.js            # 프리로드 스크립트 (IPC 통신)
├── package.json          # 프로젝트 설정 및 의존성
└── src/
    ├── index.html        # 메인 UI
    ├── assets/
    │   ├── css/
    │   │   └── styles.css # 스타일시트
    │   └── js/
    │       └── renderer.js # 렌더러 프로세스 스크립트
    ├── components/       # UI 컴포넌트
    └── utils/            # 유틸리티 함수
```

## 기술 스택

- **Electron.js**: 데스크탑 앱 프레임워크
- **Express**: 웹 서버
- **Socket.io**: 실시간 양방향 통신
- **robotjs**: 키보드/마우스 자동화
- **screenshot-desktop**: 화면 캡처
- **electron-store**: 설정 및 데이터 저장
- **node-notifier**: 시스템 알림
- **chart.js**: 통계 시각화
- **electron-updater**: 자동 업데이트

## 개발 환경 설정

### 필수 요구사항

- Node.js 14.x 이상
- npm 6.x 이상

### 설치 및 실행

1. 의존성 패키지 설치
   ```bash
   npm install
   ```

2. 애플리케이션 실행
   ```bash
   npm start
   ```

3. 개발 모드로 실행 (개발자 도구 포함)
   ```bash
   npm run dev
   ```

## 빌드 방법

```bash
npm run build
```

빌드된 파일은 `dist` 디렉토리에 생성됩니다.

## 사용 방법

1. 데스크탑 앱을 실행합니다.
2. 모바일 앱에서 서버 주소를 입력하여 연결합니다 (기본 포트: 6000).
3. 사용자 관리 탭에서 사용자를 추가/관리할 수 있습니다.
4. 대시보드 탭에서 연결된 클라이언트와 명령 이력을 확인할 수 있습니다.
5. 설정 탭에서 자동 버튼 클릭 기능과 보안 설정을 구성할 수 있습니다.
6. 스크립트 탭에서 자동화 스크립트를 생성하고 관리할 수 있습니다.

## 설정 옵션

- **포트 설정**: 서버 포트를 변경할 수 있습니다 (기본값: 6000).
- **클로드 앱 경로**: 클로드 데스크탑 앱의 경로를 설정할 수 있습니다.
- **자동 버튼 클릭**: "권한 허용"이나 "계속하기" 버튼 자동 클릭 기능을 켜고 끌 수 있습니다.
- **보안 설정**: 허용 IP 범위, 인증 타임아웃, 로그인 시도 제한 등을 설정할 수 있습니다.
- **화면 캡처 설정**: 캡처 영역, 해상도, 새로고침 간격 등을 조정할 수 있습니다.
- **알림 설정**: 클라이언트 연결, 명령 실행 등의 이벤트에 대한 알림을 구성할 수 있습니다.

## 자동 버튼 클릭 작동 방식

이 기능은 클로드 데스크탑 앱에서 응답 생성 중 나타나는 팝업 버튼을 자동으로 처리합니다:

1. 명령 실행 후 앱은 주기적으로 화면을 캡처합니다 (2초 간격).
2. 화면에서 "권한 허용"이나 "계속하기" 텍스트가 있는 버튼을 찾습니다.
3. 해당 버튼이 발견되면 마우스를 이동하여 자동으로 클릭합니다.
4. 모든 버튼 클릭 이벤트는 로그에 기록되어 추적 가능합니다.

이 기능은 대화 흐름이 중단되는 것을 방지하고 사용자 경험을 향상시킵니다.

## 자동화 스크립트 사용법

1. 스크립트 탭에서 "새 스크립트 생성"을 클릭합니다.
2. 스크립트 이름과 설명을 입력합니다.
3. 명령어들을 순서대로 추가하고 각 명령 사이의 지연 시간을 설정합니다.
4. 조건부 로직을 추가하려면 "조건 추가" 버튼을 사용합니다.
5. 시간 기반 실행을 원하면 스케줄 섹션에서 날짜와 시간을 설정합니다.
6. "저장" 버튼을 클릭하여 스크립트를 저장합니다.
7. 저장된 스크립트는 목록에서 "실행" 버튼을 클릭하여 실행할 수 있습니다.

## 업데이트 및 유지보수

앱은 자동 업데이트 기능을 지원합니다. 새 버전이 출시되면 다음 시작 시 자동으로 업데이트됩니다. 수동 업데이트는 "도움말 > 업데이트 확인" 메뉴에서 수행할 수 있습니다.

## 주의사항

- 이 앱은 로컬 네트워크 내에서 사용하도록 설계되었습니다.
- 사용자 정보는 암호화되어 저장되지만, 추가 보안을 위해 강력한 비밀번호 사용을 권장합니다.
- 화면 캡처 및 마우스 자동화 기능을 사용하려면 운영체제의 권한 설정이 필요할 수 있습니다.
- 자동 버튼 클릭 기능은 클로드 앱의 UI 변경에 따라 조정이 필요할 수 있습니다.
- 높은 빈도의 명령 실행은 서버 성능에 영향을 줄 수 있으므로 적절한 지연 시간 설정을 권장합니다.
